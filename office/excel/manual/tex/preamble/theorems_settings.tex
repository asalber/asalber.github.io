% Autor: Alfredo Sánchez Alberca (email:asalber@ceu.es)

% Teoremas en cajas coloreadas
\usepackage[most]{tcolorbox}
\tcbuselibrary{minted}
\usepackage{varwidth}
 
\DeclareTotalTCBox{\tcverb}{m}{nobeforeafter, tcbox raise base, size=fbox}{\texttt{#1}}
%\newtcbox{\tcverb}{nobeforeafter,verbatim,tcbox ,size=fbox,height=\baselineskip}

%\DeclareTotalTCBox{\tcverb}{s v}{verbatim}{\lstinline[language=command.com]^#2^}


\newtcbox{cajapeque}{nobeforeafter, tcbox raise base}
\newtcolorbox{cajagrande}{}

% Listado de código no numerado. El primer parámetro es opcional e indica el lenguaje y el segundo es obligatorio e indica el
% título
\DeclareTCBListing{listado}{O{} m}{%
breakable,
noparskip,
listing engine=minted,
listing only,
list entry={\protect\numberline{\thetcbcounter}#3},
colback=red!5!white,
colframe=red!75!black,
fonttitle=\bfseries,
title=#2,
minted language=#1}

% Listado de código númerado. Ël primer parámetro es opcional e indica el lenguaje y el segundo es obligatorio e indica el título
% \DeclareTCBListing{listadonum}{O{} m}{%
% enhanced,
% breakable,
% noparskip,
% listing engine=minted,
% minted options={fontsize=\small,linenos,numbersep=2mm},
% listing only,
% colback=red!5!white,
% colframe=red!75!black,
% fonttitle=\bfseries,
% title=#2,
% minted language=#1,
% overlay={\begin{tcbclipinterior}\fill[red!20!blue!20!white] (frame.south west)
% rectangle ([xshift=5mm]frame.north west);\end{tcbclipinterior}}}

\newtcblisting[auto counter,number within=chapter, list inside=listado]{listadonum}[3][turtle]{
enhanced,
breakable,
noparskip,
listing engine=minted,
minted options={fontsize=\small,linenos,numbersep=2mm},
listing only,
list entry={\protect\numberline{\thetcbcounter}#2},
colback=red!5!white,
colframe=red!75!black,
fonttitle=\bfseries,
title={Listado \thetcbcounter: #2},
label={list:#3},
minted language=#1,
overlay={\begin{tcbclipinterior}\fill[red!20!blue!20!white] (frame.south west)
rectangle ([xshift=5mm]frame.north west);\end{tcbclipinterior}}}


\newtcbtheorem[auto counter, number within=chapter, list inside=tabla]{tabla}{Tabla}{
enhanced,
breakable,
left=0mm,
right=0mm,
top=0mm,
bottom=0mm,
boxsep=1mm,
toptitle=1mm,
bottomtitle=1mm,
fonttitle=\bfseries,
colback=yellow!10!white,
colframe=color1!50!white,
coltitle=color1!50!black,
list entry={\protect\numberline{\thetcbcounter}#2},
}{tab}


\newtcbtheorem[number within=chapter]{teorema}{Teorema}{
enhanced,
breakable,
frame empty,
colback=greenceu!10!white,
colframe=color1!50!white,
coltitle=color1!50!black,
colbacktitle=color1!15!white,
fonttitle=\bfseries,
top= 5mm,
borderline={0.5mm}{0mm}{color1!50!white},
attach boxed title to top left={yshift=-3mm, xshift=5mm },
boxed title style={boxrule=0.4pt},
varwidth boxed title
}{teo}


\newtcbtheorem[number within=chapter]{definicion}{Definición}{
enhanced,
breakable,
frame empty,
colback=greenceu!10!white,
colframe=color1!50!white,
coltitle=color1!50!black,
colbacktitle=color1!15!white,
fonttitle=\bfseries,
top= 5mm,
borderline={0.5mm}{0mm}{color1!50!white},
attach boxed title to top left={yshift=-3mm, xshift=5mm },
boxed title style={boxrule=0.4pt},
varwidth boxed title
}{def}


\newtcbtheorem[number within=chapter]{ejemplo}{Ejemplo}{
enhanced,
breakable,
frame empty,
%colback=greenceu!10!white,
colframe=color2!50!white,
coltitle=color2!50!black,
colbacktitle=color2!15!white,
fonttitle=\bfseries,
top= 5mm,
borderline={0.5mm}{0mm}{color2!50!white},
attach boxed title to top left={yshift=-3mm, xshift=5mm },
boxed title style={boxrule=0.4pt},
varwidth boxed title
}{ej}


% \newtcbtheorem[number within=chapter]{ejemplo}{Ejemplo}{
% enhanced,
% breakable,
% skin=enhancedlast jigsaw,
% attach boxed title to top left={xshift=-4mm,yshift=-0.5mm},
% fonttitle=\bfseries\sffamily,
% varwidth boxed title=0.7\linewidth,
% colbacktitle=color1!15!white,
% coltitle=color1!50!black,
% colframe=color1!50!white,
% %interior style={top color=blue!10!white,bottom color=red!10!white},
% boxed title style={empty,arc=0pt,outer arc=0pt,boxrule=0pt},
% underlay boxed title={
% \fill[color1!50!white] (title.north west) -- (title.north east) -- +(\tcboxedtitleheight-1mm,-\tcboxedtitleheight+1mm) --
% ([xshift=4mm,yshift=0.5mm]frame.north east) -- +(0mm,-1mm) -- (title.south west) -- cycle; 
% \fill[color1!15!white!50!black] ([yshift=-0.5mm]frame.north west) -- +(-0.4,0) -- +(0,-0.3) -- cycle;
% \fill[color1!15!white!50!black] ([yshift=-0.5mm]frame.north east) -- +(0,-0.3) -- +(0.4,0) -- cycle; }
% }{ej}

